(this.webpackJsonpra_observable=this.webpackJsonpra_observable||[]).push([[0],{72:function(e,t,c){},73:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),a=c(31),i=c.n(a),s=c(6),o=c(28),u=c(5),l=c(11),d=Object(l.d)({name:"searchServices",initialState:{searchField:"",foundServices:null,loading:!1,error:null},reducers:{changeSearchField:function(e,t){var c=t.payload;c||(e.searchField="",e.foundServices=null),e.searchField=c},searchServicesRequest:function(){},searchServicesSuccess:function(e,t){var c=t.payload;e.foundServices=c}}}),v=d.actions,b=v.changeSearchField,j=v.searchServicesRequest,p=v.searchServicesSuccess,h=d.reducer,f=c(1),m=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.searchServices})).searchField;return Object(f.jsx)("div",{className:"filter-services",children:Object(f.jsxs)("label",{className:"filter-services_label",children:[Object(f.jsx)("span",{className:"filter-services_text",children:"Search"}),Object(f.jsx)("input",{type:"text",className:"filter-services_input",onChange:function(t){var c=t.target.value;e(b(c))},value:t,placeholder:"Type something to search..."})]})})},O=function(e){var t=e.radius,c=e.width,r=e.color,n=2.5*t;return Object(f.jsx)("svg",{className:"loading-spinner",viewBox:"0 0 ".concat(n," ").concat(n),children:Object(f.jsx)("circle",{className:"path",cx:n/2,cy:n/2,r:t,fill:"none",strokeWidth:c,stroke:r})})},S=function(e){var t=e.type,c=e.onInputChange,r=(e.onFormSubmit,e.isLoading),n=Object(s.c)((function(e){return e["".concat(t,"Service")].service}));return Object(f.jsxs)("div",{className:"form_container",children:[r&&Object(f.jsx)("div",{className:"loading_wrapper",children:Object(f.jsx)(O,{radius:"20",width:"5",color:"rgb(210, 70, 75)"})}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:"add-service_form",children:[Object(f.jsx)(g,{label:"Name",name:"name",inputValue:n.name,onInputChange:c,type:"text"}),Object(f.jsx)(g,{label:"Price",name:"price",inputValue:n.price,onInputChange:c,type:"number"}),Object(f.jsx)(g,{label:"Description",name:"content",inputValue:n.content,onInputChange:c,type:"text"}),Object(f.jsx)("button",{type:"submit",className:"form_submit",children:"Save"})]})]})},g=function(e){var t=e.name,c=e.label,r=e.inputValue,n=e.onInputChange,a=e.type;return Object(f.jsxs)("label",{className:"form_label",children:[Object(f.jsx)("span",{className:"form_label_text",children:c}),Object(f.jsx)("input",{onChange:function(e){var c=e.target.value;n(t,"number"===a?+c:c)},className:"form_input",value:r,type:a})]})},x=function(e){var t=e.onClick;return Object(f.jsx)("button",{className:"retry-btn",onClick:t,children:"Repeat request"})},y=function(e){var t=e.message,c=e.onRetry;return Object(f.jsxs)("div",{className:"error-message",children:[t,c&&Object(f.jsx)(x,{onClick:c})]})},k=c(19),N=c.n(k),F=c(24);function _(e){return w.apply(this,arguments)}function w(){return(w=Object(F.a)(N.a.mark((function e(t){var c,r,n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.url,r=t.method,n=t.data,e.next=3,fetch(c,{method:r,body:JSON.stringify(n)});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error(a.statusText);case 6:return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=Object(l.d)({name:"serviceList",initialState:{services:[],loading:!1,error:null},reducers:{addService:function(e,t){var c=t.payload,r=c.id,n=c.name,a=c.price,i=c.content,s={id:r,name:n,price:Number(a),content:i};e.services.push(s)},getServicesRequest:function(e,t){t.payload;e.loading=!0,e.error=null},getServicesSuccess:function(e,t){var c=t.payload;e.services=c,e.loading=!1,e.error=null},getServicesFailure:function(e,t){var c=t.payload;e.error=c,e.loading=!1},removeServiceSuccess:function(e,t){var c=t.payload;e.services=e.services.filter((function(e){return e.id!==c}))},editService:function(e,t){var c=t.payload,r=e.services.findIndex((function(e){return e.id===c.id}));e.services[r]=c}}}),E=C.actions,R=E.addService,L=E.editService,q=E.getServicesSuccess,I=E.getServicesRequest,J=E.getServicesFailure,V=E.removeServiceSuccess,A=C.reducer,P={service:{id:"",name:"",price:"",content:""},loading:!1,error:null},T=Object(l.c)("editService/fetchEditService",function(){var e=Object(F.a)(N.a.mark((function e(t,c){var r,n,a,i,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.service,n=t.history,a=c.dispatch,i=c.rejectWithValue,e.prev=2,e.next=5,_({url:"".concat("https://ra-thunk-backend.herokuapp.com/api/services","/").concat(r.id,"?fortune"),method:"PUT",data:r});case 5:return s=e.sent,a(L(s)),a(G()),n.push("/services"),e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",i(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,c){return e.apply(this,arguments)}}()),W=Object(l.d)({name:"editService",initialState:P,reducers:{getServiceRequest:function(e){e.loading=!0,e.error=null},getServiceSuccess:function(e,t){var c=t.payload;e.service=c,e.loading=!1,e.error=null},getServiceFailure:function(e,t){var c=t.payload;e.error=c,e.loading=!1},changeEditServiceField:function(e,t){var c=t.payload,r=c.name,n=c.value;e.service[r]=n},resetEditForm:function(e){e.service=P.service,e.loading=!1,e.error=null}}}),B=W.actions,D=B.getServiceRequest,U=B.getServiceSuccess,M=B.getServiceFailure,z=B.changeEditServiceField,G=B.resetEditForm,H=W.reducer,K=function(e){var t=e.id,c=Object(s.b)(),n=Object(u.g)(),a=Object(s.c)((function(e){return e.editService})),i=a.loading,o=a.error;return Object(r.useEffect)((function(){c(D(t))}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(S,{type:"edit",onInputChange:function(e,t){c(z({name:e,value:t}))},onFormSubmit:function(e){var t=e.id,r=e.name,a=e.price,i=e.content;r&&a&&i?c(T({service:{id:t,name:r,price:a,content:i},history:n})):console.log("\u0422\u0443\u0442 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0430\u043a\u0430\u044f-\u043d\u0438\u0431\u0443\u0434\u044c \u043c\u043e\u0434\u0430\u043b\u043a\u0430 \u0438\u043b\u0438 \u043f\u043e\u043f\u0430\u043f")},isLoading:i}),o&&Object(f.jsx)(y,{message:o,onRetry:function(){c(D(t))}})]})},Q=Object(l.c)("addService/fetchAddService",function(){var e=Object(F.a)(N.a.mark((function e(t,c){var r,n,a,i,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.service,n=t.history,a=c.dispatch,i=c.rejectWithValue,e.prev=2,e.next=5,_({url:"".concat("https://ra-thunk-backend.herokuapp.com/api/services"),method:"POST",data:r});case 5:return s=e.sent,a(R(s)),a(G()),n.push("/services"),e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(2),e.abrupt("return",i(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,c){return e.apply(this,arguments)}}()),X=Object(l.d)({name:"addService",initialState:{service:{name:"",price:"",content:""},loading:!1,error:null},reducers:{changeAddServiceField:function(e,t){var c=t.payload,r=c.name,n=c.value;e.service[r]=n}}}),Y=X.actions.changeAddServiceField,Z=X.reducer,$=function(){var e=Object(u.g)(),t=Object(s.b)(),c=Object(s.c)((function(e){return e.addService})),r=c.loading,n=c.error;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(S,{type:"add",onInputChange:function(e,c){t(Y({name:e,value:c}))},onFormSubmit:function(c){var r=c.name,n=c.price,a=c.content;r&&n&&a?t(Q({service:{name:r,price:n,content:a},history:e})):console.log("\u0422\u0443\u0442 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043a\u0430\u043a\u0430\u044f-\u043d\u0438\u0431\u0443\u0434\u044c \u043c\u043e\u0434\u0430\u043b\u043a\u0430 \u0438\u043b\u0438 \u043f\u043e\u043f\u0430\u043f")},isLoading:r}),n&&Object(f.jsx)(y,{message:n})]})},ee=function(){return Object(f.jsx)(ce,{isOpen:!0,children:Object(f.jsx)($,{})})},te=function(e){var t=e.match;return Object(f.jsx)(ce,{isOpen:!0,children:Object(f.jsx)(K,{id:t.params.id})})},ce=function(e){var t=e.children,c=e.isOpen,n=Object(s.b)(),a=Object(u.g)(),i=Object(r.useRef)(),o=function(){n(G()),a.push("/services")};return function(e,t){Object(r.useEffect)((function(){var c=function(c){var r=e.current;r&&!r.contains(c.target)&&t(c)};return document.addEventListener("mousedown",c),document.addEventListener("touchstart",c),function(){document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c)}}),[t,e])}(i,o),c&&Object(f.jsx)("div",{className:"modal_wrapper",children:Object(f.jsxs)("div",{className:"modal",ref:i,children:[Object(f.jsx)("button",{className:"modal_close-btn",onClick:o,children:"\xd7"}),t]})})},re=c(52),ne=function(e){var t=e.services;return Object(f.jsx)("ul",{className:"service-list",children:t.map((function(e,t){return Object(r.createElement)(ae,Object(re.a)(Object(re.a)({},e),{},{key:t}))}))})},ae=function(e){var t=e.name,c=e.price,r=e.id,n=Object(s.b)();return Object(f.jsxs)("li",{className:"service-item",children:[Object(f.jsxs)("div",{className:"service-item_info",children:[Object(f.jsx)("div",{className:"service-item_name",children:t}),Object(f.jsxs)("div",{className:"service-item_price",children:[c," \u20bd"]})]}),Object(f.jsxs)("div",{className:"service-item_controls",children:[Object(f.jsx)(o.b,{to:"".concat("/services","/").concat(r),children:Object(f.jsx)(ie,{label:"Edit"})}),Object(f.jsx)(ie,{onClick:function(){var e=Object(l.b)("serviceList/removeService");n(e(r))},label:"Remove"})]})]})},ie=function(e){var t=e.onClick,c=e.label;return Object(f.jsx)("button",{onClick:t,className:"service-item_btn",children:c})},se=(c(72),function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.serviceList})),c=t.services,n=t.loading,a=t.error,i=Object(s.c)((function(e){return e.searchServices})).foundServices;return Object(r.useEffect)((function(){e(I())}),[e]),Object(f.jsxs)(o.a,{children:[Object(f.jsx)(u.b,{exact:!0,path:["/"],children:Object(f.jsx)(u.a,{to:"/services"})}),n?Object(f.jsx)(O,{radius:"20",width:"5",color:"rgb(210, 70, 75)"}):a?Object(f.jsx)(y,{message:a,onRetry:function(){e(I())}}):Object(f.jsxs)("div",{className:"services-app",children:[Object(f.jsx)(o.b,{to:"".concat("/services","/add"),className:"add-service_link",children:Object(f.jsx)("button",{className:"add-service_btn",children:"Add new service"})}),Object(f.jsx)(m,{}),Object(f.jsx)(ne,{services:i||c}),Object(f.jsxs)(u.d,{children:[Object(f.jsx)(u.b,{path:"".concat("/services","/add"),component:ee}),Object(f.jsx)(u.b,{path:"".concat("/services","/:id"),component:te})]})]})]})}),oe=c(80),ue=c(76),le=c(81),de=c(79),ve=c(82),be=c(77),je=c(42),pe=c(78),he=c(74),fe=c(83),me=Object(le.a)((function(e){return e.pipe(Object(ue.a)("searchServices/changeSearchField"),Object(je.a)((function(e){return e.payload.trim()})),Object(he.a)((function(e){return""!==e})),Object(fe.a)(600),Object(je.a)((function(e){return j(e)})))}),(function(e){return e.pipe(Object(ue.a)("searchServices/searchServicesRequest"),Object(je.a)((function(e){return e.payload})),Object(je.a)((function(e){return new URLSearchParams({q:e})})),Object(be.a)((function(e){return ve.a.getJSON("".concat("https://ra-thunk-backend.herokuapp.com/api/search","?").concat(e)).pipe(Object(je.a)((function(e){return p(e)})))})))}),(function(e){return e.pipe(Object(ue.a)("serviceList/getServicesRequest"),Object(be.a)((function(e){return ve.a.getJSON("".concat("https://ra-thunk-backend.herokuapp.com/api/services","?fortune")).pipe(Object(je.a)((function(e){return q(e)})),Object(pe.a)((function(e){return Object(de.a)(J(e.message))})))})))}),(function(e){return e.pipe(Object(ue.a)("serviceList/removeService"),Object(je.a)((function(e){return e.payload})),Object(be.a)((function(e){return ve.a.delete("".concat("https://ra-thunk-backend.herokuapp.com/api/services","/").concat(e)).pipe(Object(je.a)((function(){return e})))})),Object(je.a)((function(e){return V(e)})))}),(function(e){return e.pipe(Object(ue.a)("editService/getServiceRequest"),Object(je.a)((function(e){return e.payload})),Object(be.a)((function(e){return ve.a.getJSON("".concat("https://ra-thunk-backend.herokuapp.com/api/services","/").concat(e,"?fortune")).pipe(Object(je.a)((function(e){return U(e)})),Object(pe.a)((function(e){return Object(de.a)(M(e.message))})))})))})),Oe=Object(oe.a)(),Se=Object(l.a)({reducer:{serviceList:A,addService:Z,editService:H,searchServices:h},middleware:[Oe]});Oe.run(me),i.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(s.a,{store:Se,children:Object(f.jsx)(se,{})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.c856232a.chunk.js.map